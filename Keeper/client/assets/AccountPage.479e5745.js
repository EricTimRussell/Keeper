import{b as r,A as l,V as u,_ as V,r as w,d as x,e as m,f as A,M as k,P as v,g as C,K as I,c as n,a as t,n as M,t as g,h as y,F as p,i as b,w as _,v as f,j as S,o as i,k as P,p as U,l as j,m as B,u as E}from"./index.438c7f46.js";class N{async createVault(e){const o=await r.post("api/vaults",e);l.vaults.push(new u(o.data))}async getMyVaults(){const e=await r.get("account/vaults");l.accountVaults=e.data.map(o=>new u(o))}async getUsersVaults(e){const o=await r.get(`api/profiles/${e}/vaults`);l.activeVault=o.data.map(a=>new u(a))}async getVaultById(e){const o=await r.get(`api/vaults/${e}`);l.activeVault=o.data}async deleteVault(e){await r.delete(`api/vaults/${e}`),l.accountVaults=l.accountVaults.filter(o=>o.id!=e)}}const D=new N;const K={setup(){E();const c=w({});async function e(){try{await D.getMyVaults()}catch(o){v.error(o,"Getting Account Vaults")}}return x(()=>{e()}),{editable:c,account:m(()=>l.account),vault:m(()=>l.accountVaults),keeps:m(()=>l.keeps),async editAccount(){try{const o=c.value;await A.editAccount(o),k.getOrCreateInstance("#editAccount").hide()}catch(o){v.error(o,"Editing Account")}}}},components:{VaultCard:C,KeepCard:I}},d=c=>(U("data-v-f2ee22f1"),c=c(),j(),c),L={class:"container-fluid"},F={class:"row justify-content-center"},z=["src"],G=d(()=>t("div",{class:"col-12 text-center pt-4"},[t("i",{"data-bs-toggle":"modal","data-bs-target":"#editAccount",title:"Edit Account",class:"mdi mdi-cog selectable text-dark"})],-1)),O={class:"col-12 d-flex justify-content-center my-1"},R={class:"col-md-2 d-flex justify-content-center bg-light round"},T={key:0},q={class:"row"},H={key:0},J={class:"modal fade",id:"editAccount",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Q={class:"modal-dialog"},W={class:"modal-content"},X=d(()=>t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Edit Account"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",title:"Close Modal"})],-1)),Y={class:"modal-body"},Z={class:"form-floating"},$=d(()=>t("label",{for:"name"},"Name...",-1)),tt={class:"form-floating my-3"},et=d(()=>t("label",{for:"profilePicture"},"Picture Url...",-1)),at={class:"form-floating"},ot=d(()=>t("label",{for:"profileCoverImage"},"Cover Image Url...",-1)),st=d(()=>t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close"),t("button",{type:"submit",class:"btn btn-primary"},"Save changes")],-1));function lt(c,e,o,a,ct,nt){const h=B("VaultCard");return i(),n(p,null,[t("main",L,[t("div",F,[t("div",{class:"col-sm-12 col-md-8 d-flex flex-column justify-content-end align-items-center bgimg my-4",style:M({backgroundImage:`url(${a.account.coverImg})`})},[t("img",{src:a.account.picture,alt:"profile pic",class:"profile-img"},null,8,z)],4),G,t("div",O,[t("h1",null,g(a.account.name),1)]),t("div",R,[t("h4",null,g(a.vault.length)+" Vaults",1)]),a.vault.length>0?(i(),n("h3",T,"Vaults")):y("",!0),(i(!0),n(p,null,b(a.vault,s=>(i(),n("div",{class:"col-sm-6 col-md-3 my-4",key:s.id},[P(h,{vault:s},null,8,["vault"])]))),128)),t("div",q,[a.keeps.length>0?(i(),n("h3",H,"Keeps")):y("",!0),(i(!0),n(p,null,b(a.keeps,s=>(i(),n("div",{class:"col-sm-6 col-md-3 my-4",key:s.id}))),128))])])]),t("form",{onSubmit:e[3]||(e[3]=S(s=>a.editAccount(),["prevent"]))},[t("div",J,[t("div",Q,[t("div",W,[X,t("div",Y,[t("div",Z,[_(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>a.editable.name=s),type:"text",class:"form-control",id:"name",placeholder:"name"},null,512),[[f,a.editable.name]]),$]),t("div",tt,[_(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>a.editable.picture=s),type:"url",class:"form-control",id:"profilePicture",placeholder:"profile picture"},null,512),[[f,a.editable.picture]]),et]),t("div",at,[_(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>a.editable.coverImg=s),type:"url",class:"form-control",id:"profileCoverImage",placeholder:"profile coverImage"},null,512),[[f,a.editable.coverImg]]),ot])]),st])])])],32)],64)}const dt=V(K,[["render",lt],["__scopeId","data-v-f2ee22f1"]]);export{dt as default};
